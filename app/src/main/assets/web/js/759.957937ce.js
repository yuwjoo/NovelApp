"use strict";(self["webpackChunknovel_web"]=self["webpackChunknovel_web"]||[]).push([[759],{818:function(e,t,a){a(6647),a(7708),a(7484)},6034:function(e,t,a){a.d(t,{A:function(){return A}});var o=a(4726),s=a(6768),n=a(5828),l=a(6370),i=a(6591);const[c,r]=(0,n.YX)("sidebar"),d=Symbol(c),u={modelValue:(0,l.TU)(0)};var g=(0,s.pM)({name:c,props:u,emits:["change","update:modelValue"],setup(e,{emit:t,slots:a}){const{linkChildren:o}=(0,i.Py)(d),n=()=>+e.modelValue,l=e=>{e!==n()&&(t("update:modelValue",e),t("change",e))};return o({getActive:n,setActive:l}),()=>{var e;return(0,s.bF)("div",{role:"tablist",class:r()},[null==(e=a.default)?void 0:e.call(a)])}}});const k=(0,o.G)(g);a(6647);var p=a(8442),b=a(4548),v=a(3408);const[h,m]=(0,n.YX)("sidebar-item"),S=(0,p.X$)({},b.aI,{dot:Boolean,title:String,badge:l.VQ,disabled:Boolean,badgeProps:Object});var f=(0,s.pM)({name:h,props:S,emits:["click"],setup(e,{emit:t,slots:a}){const o=(0,b.lq)(),{parent:n,index:l}=(0,i.cJ)(d);if(!n)return void 0;const c=()=>{e.disabled||(t("click",l.value),n.setActive(l.value),o())};return()=>{const{dot:t,badge:o,title:i,disabled:r}=e,d=l.value===n.getActive();return(0,s.bF)("div",{role:"tab",class:m({select:d,disabled:r}),tabindex:r?void 0:0,"aria-selected":d,onClick:c},[(0,s.bF)(v.Ex,(0,s.v6)({dot:t,class:m("text"),content:o},e.badgeProps),{default:()=>[a.title?a.title():i]})])}}});const _=(0,o.G)(f);a(7708);var C=a(5314),R=(a(818),a(4114),a(8111),a(7588),a(144)),L=a(4232);const y={class:"catalog-panel"},F={class:"catalog-panel__header"},z={class:"catalog-panel__content"},E={class:"catalog-panel__list"},w=["onClick"];var I=(0,s.pM)({name:"catalog-panel",__name:"catalog-panel",props:{list:{type:Array,required:!0},groupCount:{type:Number,default:50}},emits:["change"],setup(e,{emit:t}){const a=t,o=e,n=(0,R.KR)(!1),l=(0,R.KR)(0),i=(0,s.EW)((()=>{const e=[];let t=-1;return o.list.forEach(((a,s)=>{s%o.groupCount===0&&(t++,e.push({name:`${t*o.groupCount+1}-${t*o.groupCount+o.groupCount}`,chapters:[]})),e[t].chapters.push(a)})),n.value?e.reverse():e})),c=(0,s.EW)((()=>{const e=i.value[l.value]?.chapters||[];return n.value?e.slice().reverse():e})),r=e=>{a("change",e)};return(e,t)=>{const a=C.In,o=_,d=k;return(0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("div",F,[t[2]||(t[2]=(0,s.Lk)("div",{class:"catalog-panel__header-title"},"目录",-1)),(0,s.Lk)("div",{class:"catalog-panel__header-sort",onClick:t[0]||(t[0]=e=>n.value=!(0,R.R1)(n))},[(0,s.bF)(a,{name:"sort"}),(0,s.eW)(" "+(0,L.v_)((0,R.R1)(n)?"正序":"倒序"),1)])]),(0,s.Lk)("div",z,[(0,s.bF)(d,{class:"catalog-panel__sidebar",modelValue:(0,R.R1)(l),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,R.i9)(l)?l.value=e:null)},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,R.R1)(i),((e,t)=>((0,s.uX)(),(0,s.Wv)(o,{key:t,title:e.name},null,8,["title"])))),128))])),_:1},8,["modelValue"]),(0,s.Lk)("div",E,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,R.R1)(c),((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"catalog-panel__list-item",onClick:t=>r(e)},(0,L.v_)(e.title),9,w)))),128))])])])}}}),X=a(1241);const x=(0,X.A)(I,[["__scopeId","data-v-2c60254f"]]);var A=x},7876:function(e,t,a){a.r(t),a.d(t,{default:function(){return B}});var o=a(6034),s=a(1049),n=(a(4114),a(6768)),l=a(144),i=a(5130),c=a(6275),r=a(2376),d=a(4232);const u={class:"book-item"},g={class:"book-item__title"};var k=(0,n.pM)({name:"book-item",__name:"book-item",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(e){return(t,a)=>((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("h1",g,(0,d.v_)(e.item.title),1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.item.paragraphs,((e,t)=>((0,n.uX)(),(0,n.CE)("p",{class:"book-item__text",key:t},(0,d.v_)(e),1)))),128))]))}}),p=a(1241);const b=(0,p.A)(k,[["__scopeId","data-v-76eadfe8"]]);var v=b;const h={class:"back-group"},m={class:"setting-wrapper"},S={class:"setting-color"},f=["onClick"],_={class:"icon-tick"},C={class:"setting-font"},R={class:"setting-btn"},L={class:"setting-item"},y=["textContent"];function F(e,t,a,o,s,l){return(0,n.uX)(),(0,n.Wv)(i.eB,{name:"setting"},{default:(0,n.k6)((()=>[(0,n.bo)((0,n.Lk)("div",null,[(0,n.Lk)("div",h,[(0,n.Lk)("div",{class:"back-content",onClick:t[0]||(t[0]=(0,i.D$)(((...e)=>l.back&&l.back(...e)),["stop"]))},t[6]||(t[6]=[(0,n.Lk)("i",{class:"icon-arrow"},null,-1),(0,n.Lk)("span",null,"返回",-1)]))]),(0,n.bo)((0,n.Lk)("div",m,[(0,n.Lk)("div",S,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.color,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:"color-item",key:t},[(0,n.Lk)("span",{class:(0,d.C4)(["item",{active:e===s.bookReadSetting.settings.customBg}]),style:(0,d.Tr)({background:e}),onClick:t=>l.changeColor(e)},[(0,n.bo)((0,n.Lk)("i",_,null,512),[[i.aG,e===s.bookReadSetting.settings.customBg]])],14,f)])))),128))]),(0,n.Lk)("div",C,[(0,n.Lk)("div",{class:"font-item",onClick:t[1]||(t[1]=(...e)=>l.minusFontSize&&l.minusFontSize(...e))},t[7]||(t[7]=[(0,n.Lk)("span",{class:"font-btn"},"A-",-1)])),(0,n.Lk)("div",{class:"font-item",onClick:t[2]||(t[2]=(...e)=>l.addFontSize&&l.addFontSize(...e))},t[8]||(t[8]=[(0,n.Lk)("span",{class:"font-btn"},"A+",-1)]))])],512),[[i.aG,a.showFlag&&s.setting]]),(0,n.Lk)("div",R,[(0,n.Lk)("div",L,[(0,n.Lk)("div",{class:"icon-wrapper",onClick:t[3]||(t[3]=(...e)=>l.openChapters&&l.openChapters(...e))},t[9]||(t[9]=[(0,n.Lk)("i",{class:"icon-directory"},null,-1)])),t[10]||(t[10]=(0,n.Lk)("span",{class:"title"},"目录",-1))]),(0,n.Lk)("div",{class:"setting-item",onClick:t[4]||(t[4]=(...e)=>l.changeMode&&l.changeMode(...e))},[(0,n.Lk)("i",{class:(0,d.C4)(l.modeCls)},null,2),(0,n.Lk)("span",{class:"title",textContent:(0,d.v_)(l.modeText)},null,8,y)]),(0,n.Lk)("div",{class:"setting-item",onClick:t[5]||(t[5]=(...e)=>l.openSetting&&l.openSetting(...e))},t[11]||(t[11]=[(0,n.Lk)("i",{class:"icon-setting"},null,-1),(0,n.Lk)("span",{class:"title"},"设置",-1)]))])],512),[[i.aG,a.showFlag]])])),_:1})}var z=a(2261);const E=(0,z.nY)("bookReadSetting",(()=>{const e=(0,l.Kh)(JSON.parse(localStorage.getItem("bookReadSettings"))||{isNight:!1,customBg:"#f6f6f6",fontSizeScale:0}),t=(0,n.EW)((()=>({night:{bg:"#1b1b1b",color:"#6e6e6e",fontSizeScale:e.fontSizeScale},light:{bg:e.customBg,color:"#101010",fontSizeScale:e.fontSizeScale}}))),a=(0,n.EW)((()=>e.isNight?t.value.night:t.value.light)),o=(t,a)=>{e[t]=a,localStorage.setItem("bookReadSettings",JSON.stringify(e))};return{settings:e,mode:t,currentMode:a,setSetting:o}}));var w={name:"setting-btn",props:{showFlag:{type:Boolean,default:!1}},data(){return{setting:!1,color:["#f6f6f6","#e1d4b2","#bed8ab","#efc1c1","#dcc49e","#d9e8ff"],bookReadSetting:E()}},computed:{modeCls(){return this.bookReadSetting.settings.isNight?"icon-brightness":"icon-night"},modeText(){return this.bookReadSetting.settings.isNight?"白天":"夜间"}},methods:{back(){this.$emit("back")},openChapters(){this.$emit("openChapters")},changeMode(){this.bookReadSetting.setSetting("isNight",!this.bookReadSetting.settings.isNight)},openSetting(){this.setting=!this.setting},changeColor(e){e!==this.bookReadSetting.settings.customBg&&this.bookReadSetting.setSetting("customBg",e)},minusFontSize(){this.bookReadSetting.settings.fontSizeScale<=-5||this.bookReadSetting.setSetting("fontSizeScale",this.bookReadSetting.settings.fontSizeScale-1)},addFontSize(){this.bookReadSetting.settings.fontSizeScale>=5||this.bookReadSetting.setSetting("fontSizeScale",this.bookReadSetting.settings.fontSizeScale+1)}},watch:{showFlag(e){!1===e&&(this.setting=!1)}}};const I=(0,p.A)(w,[["render",F],["__scopeId","data-v-570651f2"]]);var X=I;const x={class:"book-read__catalog-header"};var A=(0,n.pM)({name:"book-read",__name:"book-read",setup(e){const t=(0,c.l)(),a=(0,c.r)(),d=E(),u=(0,n.rk)("bookReadRef"),g=(0,l.KR)([]),k=(0,l.KR)(!1),p=(0,l.KR)([]),b=(0,n.EW)((()=>g.value[g.value.length-1].nextChapterId)),h=(0,l.KR)(!1),m=(0,l.KR)(!1),S=()=>{m.value=!1,h.value=!0},f=()=>{a.back()},_=async e=>{try{k.value=!0;const a=await(0,r.nw)({id:t.query.id,chapterId:e});g.value.push(a)}finally{k.value=!1}},C=async()=>{p.value=await(0,r.bm)({id:t.query.id})},R=()=>{!k.value&&b.value&&_(b.value)},L=e=>{g.value=[],_(e.id),h.value=!1,m.value=!1};return _(t.query.chapterId),C(),(0,n.sV)((()=>{(0,n.nT)((()=>{if(!u.value)return;const e=d.currentMode;u.value.style.setProperty("--book-read-bg",e.bg),u.value.style.setProperty("--book-read-color",e.color),u.value.style.setProperty("--book-read-title-color",d.settings.isNight?e.color:""),u.value.style.setProperty("--book-read-font-size-scale",e.fontSizeScale+"px")}))})),(e,t)=>{const a=s.A,c=o.A;return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",{class:"book-read",ref_key:"bookReadRef",ref:u,onClick:t[2]||(t[2]=e=>m.value=!(0,l.R1)(m))},[(0,n.bF)(a,{class:"book-read__list",list:(0,l.R1)(g),"min-item-size":200,loading:(0,l.R1)(k),"key-field":"chapterId",onScrollToBottom:R},{default:(0,n.k6)((({item:e,index:t})=>[(0,n.bF)(v,{item:e,index:t},null,8,["item","index"])])),_:1},8,["list","loading"]),(0,l.R1)(h)?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"book-read__catalog",onClick:t[1]||(t[1]=(0,i.D$)((()=>{}),["stop"]))},[(0,n.Lk)("div",x,[(0,n.Lk)("i",{class:"book-read__catalog-header-back icon-back",onClick:t[0]||(t[0]=e=>h.value=!1)}),t[3]||(t[3]=(0,n.Lk)("span",{class:"book-read__catalog-header-label"},"返回",-1))]),(0,n.bF)(c,{class:"book-read__catalog-panel",list:(0,l.R1)(p),onChange:L},null,8,["list"])])):(0,n.Q3)("",!0)],512),(0,n.bF)(X,{showFlag:(0,l.R1)(m),onOpenChapters:S,onBack:f},null,8,["showFlag"])],64)}}});const K=(0,p.A)(A,[["__scopeId","data-v-35d5bfb6"]]);var B=K}}]);
//# sourceMappingURL=759.957937ce.js.map