"use strict";(self["webpackChunknovel_web"]=self["webpackChunknovel_web"]||[]).push([[81],{240:function(e,t,o){o.d(t,{B0:function(){return u},C7:function(){return p},Fk:function(){return r},Td:function(){return i},gJ:function(){return f},wo:function(){return d}});var n=o(6591),l=o(8442);function a(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function i(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function r(e){a(window,e),a(document.body,e)}const s=(0,l.un)();function u(){s&&r(i())}const c=e=>e.stopPropagation();function d(e,t){("boolean"!==typeof e.cancelable||e.cancelable)&&e.preventDefault(),t&&c(e)}const{width:v,height:p}=(0,n.lW)();function m(e){const t=window.getComputedStyle(e);return"none"!==t.transform||"none"!==t.perspective||["transform","perspective","filter"].some((e=>(t.willChange||"").includes(e)))}function f(e){let t=e.parentElement;while(t){if(t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&m(t))return t;t=t.parentElement}return null}},269:function(){},887:function(){},968:function(e,t,o){o.d(t,{a:function(){return a}});var n=o(144),l=o(6768);function a(e){const t=(0,n.KR)(!1);return(0,l.wB)(e,(e=>{e&&(t.value=e)}),{immediate:!0}),e=>()=>t.value?e():null}},989:function(e,t,o){o.d(t,{hJ:function(){return g}});var n=o(4726),l=o(6768),a=o(144),i=o(5130),r=o(5828),s=o(6370),u=o(240),c=o(8442),d=o(7905),v=o(6591),p=o(968);const[m,f]=(0,r.YX)("overlay"),b={show:Boolean,zIndex:s.VQ,duration:s.VQ,className:s.E9,lockScroll:s.Rd,lazyRender:s.Rd,customStyle:Object,teleport:[String,Object]};var h=(0,l.pM)({name:m,inheritAttrs:!1,props:b,setup(e,{attrs:t,slots:o}){const n=(0,a.KR)(),r=(0,p.a)((()=>e.show||!e.lazyRender)),s=t=>{e.lockScroll&&(0,u.wo)(t,!0)},m=r((()=>{var a;const r=(0,c.X$)((0,d.AO)(e.zIndex),e.customStyle);return(0,c.C8)(e.duration)&&(r.animationDuration=`${e.duration}s`),(0,l.bo)((0,l.bF)("div",(0,l.v6)({ref:n,style:r,class:[f(),e.className]},t),[null==(a=o.default)?void 0:a.call(o)]),[[i.aG,e.show]])}));return(0,v.ML)("touchmove",s,{target:n}),()=>{const t=(0,l.bF)(i.eB,{name:"van-fade",appear:!0},{default:m});return e.teleport?(0,l.bF)(l.Im,{to:e.teleport},{default:()=>[t]}):t}}});const g=(0,n.G)(h)},1081:function(e,t,o){o.r(t),o.d(t,{default:function(){return Ie}});var n=o(6431),l=o(4726),a=(o(8111),o(7588),o(1701),o(3579),o(6768)),i=o(144),r=o(5828),s=o(6370),u=o(8442),c=o(240),d=o(4612),v=o(9614),p=o(6145),m=o(6591);const[f,b]=(0,r.YX)("dropdown-menu"),h={overlay:s.Rd,zIndex:s.VQ,duration:(0,s.TU)(.2),direction:(0,s.Ts)("down"),activeColor:String,autoLocate:Boolean,closeOnClickOutside:s.Rd,closeOnClickOverlay:s.Rd,swipeThreshold:s.VQ},g=Symbol(f);var y=(0,a.pM)({name:f,props:h,setup(e,{slots:t}){const o=(0,v.B)(),n=(0,i.KR)(),l=(0,i.KR)(),r=(0,i.KR)(0),{children:s,linkChildren:f}=(0,m.Py)(g),h=(0,m.f$)(n),y=(0,a.EW)((()=>s.some((e=>e.state.showWrapper)))),k=(0,a.EW)((()=>e.swipeThreshold&&s.length>+e.swipeThreshold)),w=(0,a.EW)((()=>{if(y.value&&(0,u.C8)(e.zIndex))return{zIndex:+e.zIndex+1}})),x=()=>{s.forEach((e=>{e.toggle(!1)}))},C=()=>{e.closeOnClickOutside&&x()},I=()=>{if(l.value){const t=(0,m.yD)(l);"down"===e.direction?r.value=t.bottom:r.value=c.C7.value-t.top}},F=()=>{y.value&&I()},R=e=>{s.forEach(((t,o)=>{o===e?t.toggle():t.state.showPopup&&t.toggle(!1,{immediate:!0})}))},S=(t,n)=>{const{showPopup:l}=t.state,{disabled:i,titleClass:r}=t;return(0,a.bF)("div",{id:`${o}-${n}`,role:"button",tabindex:i?void 0:0,"data-allow-mismatch":"attribute",class:[b("item",{disabled:i,grow:k.value}),{[d.Dk]:!i}],onClick:()=>{i||R(n)}},[(0,a.bF)("span",{class:[b("title",{down:l===("down"===e.direction),active:l}),r],style:{color:l?e.activeColor:""}},[(0,a.bF)("div",{class:"van-ellipsis"},[t.renderTitle()])])])};return(0,p.c)({close:x}),f({id:o,props:e,offset:r,updateOffset:I}),(0,m.W3)(n,C),(0,m.ML)("scroll",F,{target:h,passive:!0}),()=>{var e;return(0,a.bF)("div",{ref:n,class:b()},[(0,a.bF)("div",{ref:l,style:w.value,class:b("bar",{opened:y.value,scrollable:k.value})},[s.map(S)]),null==(e=t.default)?void 0:e.call(t)])}}});const k=(0,l.G)(y);o(6647);var w=o(4548),x=o(5632),C=o(2094);const[I,F]=(0,r.YX)("button"),R=(0,u.X$)({},w.aI,{tag:(0,s.Ts)("button"),text:String,icon:String,type:(0,s.Ts)("default"),size:(0,s.Ts)("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:(0,s.Ts)("button"),loadingSize:s.VQ,loadingText:String,loadingType:String,iconPosition:(0,s.Ts)("left")});var S=(0,a.pM)({name:I,props:R,emits:["click"],setup(e,{emit:t,slots:o}){const n=(0,w.lq)(),l=()=>o.loading?o.loading():(0,a.bF)(C.Rh,{size:e.loadingSize,type:e.loadingType,class:F("loading")},null),i=()=>e.loading?l():o.icon?(0,a.bF)("div",{class:F("icon")},[o.icon()]):e.icon?(0,a.bF)(x.In,{name:e.icon,class:F("icon"),classPrefix:e.iconPrefix},null):void 0,r=()=>{let t;if(t=e.loading?e.loadingText:o.default?o.default():e.text,t)return(0,a.bF)("span",{class:F("text")},[t])},s=()=>{const{color:t,plain:o}=e;if(t){const e={color:o?t:"white"};return o||(e.background=t),t.includes("gradient")?e.border=0:e.borderColor=t,e}},u=o=>{e.loading?(0,c.wo)(o):e.disabled||(t("click",o),n())};return()=>{const{tag:t,type:o,size:n,block:l,round:c,plain:v,square:p,loading:m,disabled:f,hairline:b,nativeType:h,iconPosition:g}=e,y=[F([o,n,{plain:v,block:l,round:c,square:p,loading:m,disabled:f,hairline:b}]),{[d.kw]:b}];return(0,a.bF)(t,{type:h,class:y,style:s(),disabled:f,onClick:u},{default:()=>[(0,a.bF)("div",{class:F("content")},["left"===g&&i(),r(),"right"===g&&i()])]})}}});const z=(0,l.G)(S);o(7708),o(7484),o(7265);var T=o(8139),B=(o(887),o(5130)),_=o(7905);function V(e,{args:t=[],done:o,canceled:n,error:l}){if(e){const a=e.apply(null,t);(0,u.yL)(a)?a.then((e=>{e?o():n&&n()})).catch(l||u.lQ):a?o():n&&n()}else o()}const[O,E]=(0,r.YX)("stepper"),P=200,L=(e,t)=>String(e)===String(t),K={min:(0,s.TU)(1),max:(0,s.TU)(1/0),name:(0,s.TU)(""),step:(0,s.TU)(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:s.Rd,showMinus:s.Rd,showInput:s.Rd,longPress:s.Rd,autoFixed:s.Rd,allowEmpty:Boolean,modelValue:s.VQ,inputWidth:s.VQ,buttonSize:s.VQ,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:(0,s.TU)(1),decimalLength:s.VQ};var A=(0,a.pM)({name:O,props:K,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:t}){const o=(t,o=!0)=>{const{min:n,max:l,allowEmpty:a,decimalLength:i}=e;return a&&""===t||(t=(0,_.ZV)(String(t),!e.integer),t=""===t?0:+t,t=Number.isNaN(t)?+n:t,t=o?Math.max(Math.min(+l,t),+n):t,(0,u.C8)(i)&&(t=t.toFixed(+i))),t},n=()=>{var n;const l=null!=(n=e.modelValue)?n:e.defaultValue,a=o(l);return L(a,e.modelValue)||t("update:modelValue",a),a};let l;const r=(0,i.KR)(),s=(0,i.KR)(n()),v=(0,a.EW)((()=>e.disabled||e.disableMinus||+s.value<=+e.min)),p=(0,a.EW)((()=>e.disabled||e.disablePlus||+s.value>=+e.max)),f=(0,a.EW)((()=>({width:(0,_._V)(e.inputWidth),height:(0,_._V)(e.buttonSize)}))),b=(0,a.EW)((()=>(0,_.vE)(e.buttonSize))),h=()=>{const e=o(s.value);L(e,s.value)||(s.value=e)},g=t=>{e.beforeChange?V(e.beforeChange,{args:[t],done(){s.value=t}}):s.value=t},y=()=>{if("plus"===l&&p.value||"minus"===l&&v.value)return void t("overlimit",l);const n="minus"===l?-e.step:+e.step,a=o((0,_.LF)(+s.value,n));g(a),t(l)},k=t=>{const o=t.target,{value:n}=o,{decimalLength:l}=e;let a=(0,_.ZV)(String(n),!e.integer);if((0,u.C8)(l)&&a.includes(".")){const e=a.split(".");a=`${e[0]}.${e[1].slice(0,+l)}`}e.beforeChange?o.value=String(s.value):L(n,a)||(o.value=a);const i=a===String(+a);g(i?+a:a)},w=o=>{var n;e.disableInput?null==(n=r.value)||n.blur():t("focus",o)},x=n=>{const l=n.target,i=o(l.value,e.autoFixed);l.value=String(i),s.value=i,(0,a.dY)((()=>{t("blur",n),(0,c.B0)()}))};let C,I;const F=()=>{I=setTimeout((()=>{y(),F()}),P)},R=()=>{e.longPress&&(C=!1,clearTimeout(I),I=setTimeout((()=>{C=!0,y(),F()}),d.wT))},S=t=>{e.longPress&&(clearTimeout(I),C&&(0,c.wo)(t))},z=t=>{e.disableInput&&(0,c.wo)(t)},T=e=>({onClick:t=>{(0,c.wo)(t),l=e,y()},onTouchstartPassive:()=>{l=e,R()},onTouchend:S,onTouchcancel:S});return(0,a.wB)((()=>[e.max,e.min,e.integer,e.decimalLength]),h),(0,a.wB)((()=>e.modelValue),(e=>{L(e,s.value)||(s.value=o(e))})),(0,a.wB)(s,(o=>{t("update:modelValue",o),t("change",o,{name:e.name})})),(0,m.Gp)((()=>e.modelValue)),()=>(0,a.bF)("div",{role:"group",class:E([e.theme])},[(0,a.bo)((0,a.bF)("button",(0,a.v6)({type:"button",style:b.value,class:[E("minus",{disabled:v.value}),{[d.Dk]:!v.value}],"aria-disabled":v.value||void 0},T("minus")),null),[[B.aG,e.showMinus]]),(0,a.bo)((0,a.bF)("input",{ref:r,type:e.integer?"tel":"text",role:"spinbutton",class:E("input"),value:s.value,style:f.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,autocomplete:"off","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":s.value,onBlur:x,onInput:k,onFocus:w,onMousedown:z},null),[[B.aG,e.showInput]]),(0,a.bo)((0,a.bF)("button",(0,a.v6)({type:"button",style:b.value,class:[E("plus",{disabled:p.value}),{[d.Dk]:!p.value}],"aria-disabled":p.value||void 0},T("plus")),null),[[B.aG,e.showPlus]])])}});const M=(0,l.G)(A);o(116);const X={show:Boolean,zIndex:s.VQ,overlay:s.Rd,duration:s.VQ,teleport:[String,Object],lockScroll:s.Rd,lazyRender:s.Rd,beforeClose:Function,overlayStyle:Object,overlayClass:s.E9,transitionAppear:Boolean,closeOnClickOverlay:s.Rd};Object.keys(X);function $(e,t){return e>t?"horizontal":t>e?"vertical":""}function D(){const e=(0,i.KR)(0),t=(0,i.KR)(0),o=(0,i.KR)(0),n=(0,i.KR)(0),l=(0,i.KR)(0),a=(0,i.KR)(0),r=(0,i.KR)(""),s=(0,i.KR)(!0),u=()=>"vertical"===r.value,c=()=>"horizontal"===r.value,v=()=>{o.value=0,n.value=0,l.value=0,a.value=0,r.value="",s.value=!0},p=o=>{v(),e.value=o.touches[0].clientX,t.value=o.touches[0].clientY},m=i=>{const u=i.touches[0];o.value=(u.clientX<0?0:u.clientX)-e.value,n.value=u.clientY-t.value,l.value=Math.abs(o.value),a.value=Math.abs(n.value);const c=10;(!r.value||l.value<c&&a.value<c)&&(r.value=$(l.value,a.value)),s.value&&(l.value>d.Ez||a.value>d.Ez)&&(s.value=!1)};return{move:m,start:p,reset:v,startX:e,startY:t,deltaX:o,deltaY:n,offsetX:l,offsetY:a,direction:r,isVertical:u,isHorizontal:c,isTap:s}}let W=0;const Y="van-overflow-hidden";function Q(e,t){const o=D(),n="01",l="10",i=t=>{o.move(t);const a=o.deltaY.value>0?l:n,i=(0,m.mH)(t.target,e.value),{scrollHeight:r,offsetHeight:s,scrollTop:u}=i;let d="11";0===u?d=s>=r?"00":"01":u+s>=r&&(d="10"),"11"===d||!o.isVertical()||parseInt(d,2)&parseInt(a,2)||(0,c.wo)(t,!0)},r=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",i,{passive:!1}),W||document.body.classList.add(Y),W++},s=()=>{W&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",i),W--,W||document.body.classList.remove(Y))},u=()=>t()&&r(),d=()=>t()&&s();(0,m.kz)(u),(0,a.Y4)(d),(0,a.xo)(d),(0,a.wB)(t,(e=>{e?r():s()}))}var G=o(968);const q=Symbol();var U=o(6438);const N=()=>{var e;const{scopeId:t}=(null==(e=(0,a.nI)())?void 0:e.vnode)||{};return t?{[t]:""}:null};var j=o(989);const H=(0,u.X$)({},X,{round:Boolean,position:(0,s.Ts)("center"),closeIcon:(0,s.Ts)("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:(0,s.Ts)("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[J,Z]=(0,r.YX)("popup");var ee=(0,a.pM)({name:J,inheritAttrs:!1,props:H,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:n}){let l,r;const s=(0,i.KR)(),c=(0,i.KR)(),v=(0,G.a)((()=>e.show||!e.lazyRender)),f=(0,a.EW)((()=>{const t={zIndex:s.value};if((0,u.C8)(e.duration)){const o="center"===e.position?"animationDuration":"transitionDuration";t[o]=`${e.duration}s`}return t})),b=()=>{l||(l=!0,s.value=void 0!==e.zIndex?+e.zIndex:(0,U.v)(),t("open"))},h=()=>{l&&V(e.beforeClose,{done(){l=!1,t("close"),t("update:show",!1)}})},g=o=>{t("clickOverlay",o),e.closeOnClickOverlay&&h()},y=()=>{if(e.overlay)return(0,a.bF)(j.hJ,(0,a.v6)({show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},N(),{onClick:g}),{default:n["overlay-content"]})},k=e=>{t("clickCloseIcon",e),h()},w=()=>{if(e.closeable)return(0,a.bF)(x.In,{role:"button",tabindex:0,name:e.closeIcon,class:[Z("close-icon",e.closeIconPosition),d.Dk],classPrefix:e.iconPrefix,onClick:k},null)};let C;const I=()=>{C&&clearTimeout(C),C=setTimeout((()=>{t("opened")}))},F=()=>t("closed"),R=e=>t("keydown",e),S=v((()=>{var t;const{destroyOnClose:l,round:i,position:r,safeAreaInsetTop:s,safeAreaInsetBottom:u,show:d}=e;if(d||!l)return(0,a.bo)((0,a.bF)("div",(0,a.v6)({ref:c,style:f.value,role:"dialog",tabindex:0,class:[Z({round:i,[r]:r}),{"van-safe-area-top":s,"van-safe-area-bottom":u}],onKeydown:R},o,N()),[null==(t=n.default)?void 0:t.call(n),w()]),[[B.aG,d]])})),z=()=>{const{position:t,transition:o,transitionAppear:n}=e,l="center"===t?"van-fade":`van-popup-slide-${t}`;return(0,a.bF)(B.eB,{name:o||l,appear:n,onAfterEnter:I,onAfterLeave:F},{default:S})};return(0,a.wB)((()=>e.show),(e=>{e&&!l&&(b(),0===o.tabindex&&(0,a.dY)((()=>{var e;null==(e=c.value)||e.focus()}))),!e&&l&&(l=!1,t("close"))})),(0,p.c)({popupRef:c}),Q(c,(()=>e.show&&e.lockScroll)),(0,m.ML)("popstate",(()=>{e.closeOnPopstate&&(h(),r=!1)})),(0,a.sV)((()=>{e.show&&b()})),(0,a.n)((()=>{r&&(t("update:show",!0),r=!1)})),(0,a.Y4)((()=>{e.show&&e.teleport&&(h(),r=!0)})),(0,a.Gt)(q,(()=>e.show)),()=>e.teleport?(0,a.bF)(a.Im,{to:e.teleport},{default:()=>[y(),z()]}):(0,a.bF)(a.FK,null,[y(),z()])}});const te=(0,l.G)(ee);const[oe,ne]=(0,r.YX)("dropdown-item"),le={title:String,options:(0,s.zj)(),disabled:Boolean,teleport:[String,Object],lazyRender:s.Rd,modelValue:s.E9,titleClass:s.E9};var ae=(0,a.pM)({name:oe,inheritAttrs:!1,props:le,emits:["open","opened","close","closed","change","update:modelValue"],setup(e,{emit:t,slots:o,attrs:n}){const l=(0,i.Kh)({showPopup:!1,transition:!0,showWrapper:!1}),r=(0,i.KR)(),{parent:s,index:u}=(0,m.cJ)(g);if(!s)return void 0;const d=e=>()=>t(e),v=d("open"),f=d("close"),b=d("opened"),h=()=>{l.showWrapper=!1,t("closed")},y=t=>{e.teleport&&t.stopPropagation()},k=(e=!l.showPopup,t={})=>{e!==l.showPopup&&(l.showPopup=e,l.transition=!t.immediate,e&&(s.updateOffset(),l.showWrapper=!0))},w=()=>{if(o.title)return o.title();if(e.title)return e.title;const t=e.options.find((t=>t.value===e.modelValue));return t?t.text:""},C=o=>{const{activeColor:n}=s.props,{disabled:i}=o,r=o.value===e.modelValue,u=()=>{i||(l.showPopup=!1,o.value!==e.modelValue&&(t("update:modelValue",o.value),t("change",o.value)))},c=()=>{if(r)return(0,a.bF)(x.In,{class:ne("icon"),color:i?void 0:n,name:"success"},null)};return(0,a.bF)(T.fh,{role:"menuitem",key:String(o.value),icon:o.icon,title:o.text,class:ne("option",{active:r,disabled:i}),style:{color:r?n:""},tabindex:r?0:-1,clickable:!i,onClick:u},{value:c})},I=()=>{const{offset:t}=s,{autoLocate:i,zIndex:d,overlay:p,duration:g,direction:k,closeOnClickOverlay:w}=s.props,x=(0,_.AO)(d);let I=t.value;if(i&&r.value){const e=(0,c.gJ)(r.value);e&&(I-=(0,m.yD)(e).top)}return"down"===k?x.top=`${I}px`:x.bottom=`${I}px`,(0,a.bo)((0,a.bF)("div",(0,a.v6)({ref:r,style:x,class:ne([k]),onClick:y},n),[(0,a.bF)(te,{show:l.showPopup,"onUpdate:show":e=>l.showPopup=e,role:"menu",class:ne("content"),overlay:p,position:"down"===k?"top":"bottom",duration:l.transition?g:0,lazyRender:e.lazyRender,overlayStyle:{position:"absolute"},"aria-labelledby":`${s.id}-${u.value}`,"data-allow-mismatch":"attribute",closeOnClickOverlay:w,onOpen:v,onClose:f,onOpened:b,onClosed:h},{default:()=>{var t;return[e.options.map(C),null==(t=o.default)?void 0:t.call(o)]}})]),[[B.aG,l.showWrapper]])};return(0,p.c)({state:l,toggle:k,renderTitle:w}),()=>e.teleport?(0,a.bF)(a.Im,{to:e.teleport},{default:()=>[I()]}):I()}});const ie=(0,l.G)(ae);o(269),o(4114);var re=o(4232);const se={key:0,class:"book-item-page-divider"},ue={class:"book-item__title"},ce={class:"book-item__info"},de={class:"book-item__author"},ve={class:"book-item__update-date"},pe={class:"book-item__describe"};function me(e,t,o,n,l,i){return(0,a.uX)(),(0,a.CE)("div",{class:(0,re.C4)(["book-item",{"book-item--page-first":0===o.source.bookInfo.page.index}]),onClick:t[0]||(t[0]=e=>i.handleClickItem(o.source))},[0===o.source.bookInfo.page.index?((0,a.uX)(),(0,a.CE)("div",se," 第"+(0,re.v_)(o.source.bookInfo.page.current)+"/"+(0,re.v_)(o.source.bookInfo.page.total/o.source.bookInfo.page.size)+"页 ",1)):(0,a.Q3)("",!0),(0,a.Lk)("div",ue,(0,re.v_)(o.source.bookInfo.title),1),(0,a.Lk)("div",ce,[(0,a.Lk)("div",de,"作者："+(0,re.v_)(o.source.bookInfo.author),1),(0,a.Lk)("div",ve,"最近更新："+(0,re.v_)(o.source.bookInfo.updateDate),1)]),(0,a.Lk)("div",pe,(0,re.v_)(o.source.bookInfo.describe),1)],2)}var fe={name:"bookItem",props:{index:{type:Number},source:{type:Object,default(){return{}}}},methods:{handleClickItem(e){this.$router.push({name:"bookDetail",query:{id:e.id}})}}},be=o(1241);const he=(0,be.A)(fe,[["render",me],["__scopeId","data-v-581f2990"]]);var ge=he,ye=o(3625);const ke={class:"book-city"},we={class:"dropdown-menu__item-btn"};var xe=(0,a.pM)({name:"bookCity",__name:"index",setup(e){const t=(0,i.KR)([]),o=(0,i.Kh)({current:1,size:0,total:0}),l=(0,i.KR)(!1),r=(0,i.KR)(!1),s=(0,i.Kh)({classify:"0",current:1}),u=(0,a.EW)((()=>o.total/o.size)),c=(0,i.KR)(1),d=(0,a.rk)("searchDropdownItemRef"),v=(0,i.KR)([]),p=async()=>{const e=await(0,ye.Mz)();v.value=e.map((e=>({text:e.title,value:e.id})))},m=async()=>{try{l.value=!0;const e=await(0,ye.kq)({current:o.current,classify:s.classify});o.current=e.current,o.total=e.total,o.size=e.size,t.value.push(...e.data.map(((e,t)=>({id:e.id,bookInfo:{...e.bookInfo,page:{...o,index:t}}}))))}finally{l.value=!1}},f=()=>{!l.value&&o.current+1<=u.value&&(o.current++,m())},b=e=>{t.value[e]&&(c.value=t.value[e].bookInfo.page.current)},h=()=>{s.current=c.value},g=()=>{d.value.toggle(),t.value=[],o.current=s.current,m()},y=()=>{t.value=[],o.current=1,m()};return p(),m(),(e,p)=>{const m=ie,w=M,x=T.fh,C=z,I=k,F=n.A;return(0,a.uX)(),(0,a.CE)("div",ke,[(0,a.bF)(I,{class:"book-city__dropdown dropdown-menu"},{default:(0,a.k6)((()=>[(0,a.bF)(m,{modelValue:(0,i.R1)(s).classify,"onUpdate:modelValue":p[0]||(p[0]=e=>(0,i.R1)(s).classify=e),options:(0,i.R1)(v),onChange:y},null,8,["modelValue","options"]),(0,a.bF)(m,{title:`第${(0,i.R1)(c)}页`,ref_key:"searchDropdownItemRef",ref:d,onOpen:h},{default:(0,a.k6)((()=>[(0,a.bF)(x,{center:"",title:"当前页"},{"right-icon":(0,a.k6)((()=>[(0,a.bF)(w,{modelValue:(0,i.R1)(s).current,"onUpdate:modelValue":p[1]||(p[1]=e=>(0,i.R1)(s).current=e),theme:"round",integer:"",min:"1",max:(0,i.R1)(o).total,"button-size":"22"},null,8,["modelValue","max"])])),_:1}),(0,a.bF)(x,{center:"",title:"总页数",value:(0,i.R1)(u)},null,8,["value"]),(0,a.Lk)("div",we,[(0,a.bF)(C,{type:"primary",block:"",round:"",onClick:g},{default:(0,a.k6)((()=>p[2]||(p[2]=[(0,a.eW)(" 跳转 ")]))),_:1})])])),_:1},8,["title"])])),_:1}),(0,a.bF)(F,{class:"book-city__list",list:(0,i.R1)(t),"min-item-size":200,buffer:500,loading:(0,i.R1)(l),"on-more":(0,i.R1)(r),onScrollBottom:f,onCurrentItemIndex:b},{default:(0,a.k6)((({item:e,index:t})=>[(0,a.bF)(ge,{source:e,index:t},null,8,["source","index"])])),_:1},8,["list","loading","on-more"])])}}});const Ce=(0,be.A)(xe,[["__scopeId","data-v-dc22cd3e"]]);var Ie=Ce},2094:function(e,t,o){o.d(t,{Rh:function(){return f}});var n=o(4726),l=(o(8111),o(1701),o(6768)),a=o(5828),i=o(6370),r=o(8442),s=o(7905);const[u,c]=(0,a.YX)("loading"),d=Array(12).fill(null).map(((e,t)=>(0,l.bF)("i",{class:c("line",String(t+1))},null))),v=(0,l.bF)("svg",{class:c("circular"),viewBox:"25 25 50 50"},[(0,l.bF)("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),p={size:i.VQ,type:(0,i.Ts)("circular"),color:String,vertical:Boolean,textSize:i.VQ,textColor:String};var m=(0,l.pM)({name:u,props:p,setup(e,{slots:t}){const o=(0,l.EW)((()=>(0,r.X$)({color:e.color},(0,s.vE)(e.size)))),n=()=>{const n="spinner"===e.type?d:v;return(0,l.bF)("span",{class:c("spinner",e.type),style:o.value},[t.icon?t.icon():n])},a=()=>{var o;if(t.default)return(0,l.bF)("span",{class:c("text"),style:{fontSize:(0,s._V)(e.textSize),color:null!=(o=e.textColor)?o:e.color}},[t.default()])};return()=>{const{type:t,vertical:o}=e;return(0,l.bF)("div",{class:c([t,{vertical:o}]),"aria-live":"polite","aria-busy":!0},[n(),a()])}}});const f=(0,n.G)(m)},4612:function(e,t,o){o.d(t,{$i:function(){return i},Dk:function(){return a},Ez:function(){return s},kw:function(){return l},wT:function(){return r}});const n="van-hairline",l=`${n}--surround`,a="van-haptics-feedback",i=Symbol("van-form"),r=500,s=5},6145:function(e,t,o){o.d(t,{c:function(){return a}});var n=o(6768),l=o(8442);function a(e){const t=(0,n.nI)();t&&(0,l.X$)(t.proxy,e)}},6261:function(e,t,o){o.d(t,{Ay:function(){return p},yH:function(){return d}});var n=o(6768),l=o(5828),a=o(6370),i=o(8442),r=o(4548),s=o(5632);const[u,c]=(0,l.YX)("cell"),d={tag:(0,a.Ts)("div"),icon:String,size:String,title:a.VQ,value:a.VQ,label:a.VQ,center:Boolean,isLink:Boolean,border:a.Rd,iconPrefix:String,valueClass:a.E9,labelClass:a.E9,titleClass:a.E9,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},v=(0,i.X$)({},d,r.aI);var p=(0,n.pM)({name:u,props:v,setup(e,{slots:t}){const o=(0,r.lq)(),l=()=>{const o=t.label||(0,i.C8)(e.label);if(o)return(0,n.bF)("div",{class:[c("label"),e.labelClass]},[t.label?t.label():e.label])},a=()=>{var o;if(t.title||(0,i.C8)(e.title)){const a=null==(o=t.title)?void 0:o.call(t);if(Array.isArray(a)&&0===a.length)return;return(0,n.bF)("div",{class:[c("title"),e.titleClass],style:e.titleStyle},[a||(0,n.bF)("span",null,[e.title]),l()])}},u=()=>{const o=t.value||t.default,l=o||(0,i.C8)(e.value);if(l)return(0,n.bF)("div",{class:[c("value"),e.valueClass]},[o?o():(0,n.bF)("span",null,[e.value])])},d=()=>t.icon?t.icon():e.icon?(0,n.bF)(s.In,{name:e.icon,class:c("left-icon"),classPrefix:e.iconPrefix},null):void 0,v=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const t=e.arrowDirection&&"right"!==e.arrowDirection?`arrow-${e.arrowDirection}`:"arrow";return(0,n.bF)(s.In,{name:t,class:c("right-icon")},null)}};return()=>{var l;const{tag:i,size:r,center:s,border:p,isLink:m,required:f}=e,b=null!=(l=e.clickable)?l:m,h={center:s,required:!!f,clickable:b,borderless:!p};return r&&(h[r]=!!r),(0,n.bF)(i,{class:c(h),role:b?"button":void 0,tabindex:b?0:void 0,onClick:o},{default:()=>{var e;return[d(),a(),u(),v(),null==(e=t.extra)?void 0:e.call(t)]}})}}})},6431:function(e,t,o){o.d(t,{A:function(){return s}});var n=o(6768),l=o(144),a=(0,n.pM)({name:"VirtualList",__name:"VirtualList",props:{list:{type:Array,required:!0},minItemSize:{type:Number,required:!0},buffer:{type:Number,default:0},loading:{type:Boolean,default:!1},onMore:{type:Boolean,default:!1},keyField:{type:String,default:"id"}},emits:["scroll-bottom","current-item-index"],setup(e,{emit:t}){const o=t,a=e,i=(0,n.EW)((()=>a.list.length)),r=(0,l.KR)(-1),s=(e,t,n,l)=>{cancelAnimationFrame(r.value),r.value=requestAnimationFrame((()=>{t===i.value&&o("scroll-bottom"),o("current-item-index",l)}))};return(t,o)=>{const l=(0,n.g2)("DynamicScrollerItem"),a=(0,n.g2)("DynamicScroller");return(0,n.uX)(),(0,n.Wv)(a,{items:e.list,"min-item-size":e.minItemSize,class:"virtual-list",buffer:e.buffer,emitUpdate:"",keyField:e.keyField,onUpdate:s},(0,n.eX)({default:(0,n.k6)((({item:e,index:o,active:a})=>[(0,n.bF)(l,{item:e,active:a,"data-index":o},{default:(0,n.k6)((()=>[(0,n.RG)(t.$slots,"default",{item:e,active:a,index:o})])),_:2},1032,["item","active","data-index"])])),_:2},[e.loading||0!==e.list.length?void 0:{name:"empty",fn:(0,n.k6)((()=>[o[0]||(o[0]=(0,n.Lk)("div",{class:"virtual-list__empty"},"暂无数据",-1))])),key:"0"},e.loading&&!e.onMore?{name:"after",fn:(0,n.k6)((()=>[o[1]||(o[1]=(0,n.Lk)("div",{class:"virtual-list__loading"},"Loading ...",-1))])),key:"1"}:void 0]),1032,["items","min-item-size","buffer","keyField"])}}}),i=o(1241);const r=(0,i.A)(a,[["__scopeId","data-v-884d42d2"]]);var s=r},7265:function(){},8139:function(e,t,o){o.d(t,{fh:function(){return a}});var n=o(4726),l=o(6261);const a=(0,n.G)(l.Ay)},9614:function(e,t,o){o.d(t,{B:function(){return a}});var n=o(6768);let l=0;function a(){const e=(0,n.nI)(),{name:t="unknown"}=(null==e?void 0:e.type)||{};return`${t}-${++l}`}}}]);
//# sourceMappingURL=81.f7b5c6d6.js.map